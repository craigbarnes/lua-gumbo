language: c

os:
    - linux
    - osx

compiler:
    - clang
    - gcc

env:
    - LUA_VARIANT=Lua5.1
    - LUA_VARIANT=Lua5.2
    - LUA_VARIANT=LuaJIT
    - LUA_VARIANT=LuaJIT LUAFLAGS="-joff"

before_install:
    - make -f .travis.mk before_install

install:
    - make -f .travis.mk install

script:
    - make -f .travis.mk script

matrix:
    allow_failures:
        - os: osx

branches:
    only:
        - master

notifications:
    email:
        on_success: change
        on_failure: always
